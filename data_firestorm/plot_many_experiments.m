% filenames = {'experiment_2017_04_10_11_21_38_simpy_rollout',...
%     'experiment_2017_04_14_22_22_37_simpy_rollout_dt10e1_2',...
%     'experiment_2017_04_12_20_06_16_simpy_rollout_dt10e0.5',...
%     'experiment_2017_04_12_20_58_13_simpy_rollout_dt10e0',...
%     'experiment_2017_04_12_22_09_47_simpy_rollout_dt10e-0.5',...
%     'experiment_2017_04_14_18_32_59_simpy_rollout_dt10e-1_2'};

% filenames = {'experiment_2017_04_19_02_14_56_521874_PDT_dt_10.000',...
%     'experiment_2017_04_19_01_35_52_824307_PDT_dt_10.000',...
%     'experiment_2017_04_19_00_55_52_221496_PDT_dt_10.000',...
%     'experiment_2017_04_18_23_34_59_921990_PDT_dt_10.000',...
%     'experiment_2017_04_19_00_16_17_288200_PDT_dt_10.000',...
%     'experiment_2017_04_19_05_36_37_725404_PDT_dt_-1.000',...
%     'experiment_2017_04_19_04_56_53_634589_PDT_dt_-1.000',...
%     'experiment_2017_04_19_04_17_01_208191_PDT_dt_-1.000',...
%     'experiment_2017_04_19_03_36_30_717395_PDT_dt_-1.000',...
%     'experiment_2017_04_19_02_56_49_213916_PDT_dt_-1.000',...
%     };

filenames = {...
    'experiment_2017_04_22_19_15_17_101782_PDT_dt_-1.000',...
    'experiment_2017_04_22_19_03_39_104449_PDT_dt_0.100',...
    'experiment_2017_04_22_18_51_33_838148_PDT_dt_0.316',...
    'experiment_2017_04_22_18_40_00_951295_PDT_dt_1.000',...
    'experiment_2017_04_22_18_28_44_508570_PDT_dt_3.162',...
    'experiment_2017_04_22_18_17_40_977501_PDT_dt_10.000'...

};
%%
figure()
hold on

means = [0,0,0,0,0];
stds = means;

for i = 1:numel(filenames)
    if(i == 1)
        C = [0    0.4470    0.7410];
    else
        C = [0.8500    0.3250    0.0980];
    end
    S = dataloader(['./',filenames{i},'/progress.csv']);
    plot(S.Iteration, smooth(S.AverageDiscountedReturn), 'Color',C)
    display([mean(S.AverageDiscountedReturn(1:end)),...
        std(S.AverageDiscountedReturn(1:end))])
    means(i) = mean(S.AverageDiscountedReturn(260:end));
    stds(i) = std(S.AverageDiscountedReturn(260:end));
    
end

%%

hc = figure();
set(hc,'PaperUnits','Points');
set(hc,'PaperPosition',[650,550,350,300]);
set(hc,'Units','Points');
set(hc,'Position',[650,550,350,300]);

C = {'Event-Driven', 'Fixed 10^{-1} Step', 'Fixed 10^{-0.5} Step', 'Fixed 10^0 Step',...
    'Fixed 10^{0.5} Step', 'Fixed 10^1 Step'};
% means_test = [3.48472545402, 3, 3.36982574268, 3.44130007859, 3.47328482279, 3.40493786596];
means_test = [3.63422129051, 3.60467541625, 3.61948107741, 3.59707167549, 3.55268377786, 3.58941507232];
std_test = [0.00920454916838, 0.00921876843932, 0.00915004826308, 0.00921737317442, 0.00897211201235, 0.00899137270779];

legend('ED','1','0.5','0','-0.5','-1')
grid on

errorbar(1:6, means_test, std_test, 'o')
set(gca,'XLim',[1-0.5 6+0.5],'XTickLabel', C)
rotateXLabels(gca(),45)
ylabel 'Average Discounted Return'
title 'Performance of Learned Policies on ED Simulator'
grid on

print -dpng -r300 'PerformanceOnED.png'
